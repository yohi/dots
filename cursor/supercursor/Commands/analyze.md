# `/sc:analyze` コマンド

## 概要
`/sc:analyze` コマンドはコードやシステムを詳細に分析し、問題点や改善点を特定するためのコマンドです。
このコマンドは、コード品質、パフォーマンス、セキュリティ、技術的負債などの観点から分析を行います。

## 主な機能

- **コード品質の評価**
  - 複雑度分析（サイクロマティック複雑度、認知的複雑度）
  - コーディング規約準拠度
  - コードの一貫性評価
  - 可読性の評価

- **パフォーマンスボトルネックの特定**
  - 計算量の分析
  - メモリ使用効率
  - I/O操作の最適性
  - アルゴリズム効率

- **セキュリティ脆弱性の検出**
  - 一般的な脆弱性パターンの検出
  - 入力検証の評価
  - セキュアコーディング規約への準拠度
  - 依存ライブラリの脆弱性

- **技術的負債の定量化**
  - コードの重複度
  - リファクタリング候補の特定
  - 過剰な複雑さの検出
  - 非推奨API使用の特定

## 使用例

```
/sc:analyze このファイルの複雑度と改善点を教えて
/sc:analyze このコードのパフォーマンスボトルネックを特定して
/sc:analyze このプロジェクトのセキュリティ脆弱性をチェックして
/sc:analyze このモジュールの技術的負債を評価して
```

## 分析方法

1. **コンテキスト分析**
   - ファイル種別の特定
   - 言語やフレームワークの特定
   - プロジェクト構造の把握
   - 依存関係の把握

2. **静的解析**
   - コードの構文解析
   - メトリクスの計算
   - パターンマッチング
   - コードフローの分析

3. **比較分析**
   - 業界標準との比較
   - ベストプラクティスとの照合
   - 類似実装との比較
   - 過去バージョンとの比較

4. **改善提案**
   - 具体的な改善案の提示
   - リファクタリングの提案
   - 代替実装の提案
   - 優先順位付け

## 出力形式

分析結果は以下の形式で出力されます：

```
📊 **コード分析結果**

## 概要評価
- 全体品質: [評価] / 10
- 主要な問題: [概要]
- ポジティブな側面: [概要]

## 詳細分析
### 1. コード品質
- 複雑度: [メトリクス]
- 可読性: [評価]
- 保守性: [評価]

### 2. パフォーマンス
- ボトルネック: [詳細]
- 効率性: [評価]
- 最適化候補: [詳細]

### 3. セキュリティ
- 脆弱性: [詳細]
- リスクレベル: [評価]
- セキュリティ対策: [提案]

### 4. 技術的負債
- 負債レベル: [評価]
- 主な要因: [詳細]
- 改善の優先度: [評価]

## 改善提案
1. [優先度: 高] [具体的な改善案]
2. [優先度: 中] [具体的な改善案]
3. [優先度: 低] [具体的な改善案]
```

## ペルソナ連携

このコマンドは主に `@analyst` ペルソナと連携して動作します。
ただし、分析内容によっては以下のペルソナと連携することもあります：

- コードアーキテクチャの分析: `@architect`
- パフォーマンス最適化の提案: `@developer`
- テスト品質の評価: `@tester`
- インフラ構成の分析: `@devops`

## フラグオプション

- `--depth=<1-3>`: 分析の深さを指定 (デフォルト: 2)
- `--focus=<quality|performance|security|debt>`: 特定の側面に焦点を当てる
- `--format=<short|detailed|markdown>`: 出力形式を指定 (デフォルト: detailed)
- `--compare=<file|commit>`: 特定のファイルやコミットと比較

## 使用上の注意

- 大規模なプロジェクトの分析は時間がかかる場合があります
- セキュリティ分析は完全ではなく、専門的なセキュリティ監査の代わりにはなりません
- 言語やフレームワーク固有の問題については、専門的な知識に基づいて追加の分析が必要な場合があります
